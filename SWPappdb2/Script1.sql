CREATE SCHEMA "swpdb"
GO

CREATE TABLE "swpdb"."ADRES" (
		"ULICA" CHAR(20) NULL,
		"NR_DOMU" INT NULL,
		"NR_MIESZKANIA" INT NULL,
		"KOD_POCZTOWY" CHAR(20) NULL,
		"MIASTO" CHAR(20) NULL
	)
GO

CREATE TABLE "swpdb"."BADANIE" (
		"DATA_BADANIA" DATETIME NULL,
		"RODZAJ" CHAR(50) NULL,
		"WYNIK" IMAGE NULL,
		"BADANIE_ID" INT NOT NULL IDENTITY (1,1),
		"KARTA_PACJENTA_ID" INT NULL,
		"LEKARZ_ZLECAJACY" INT NULL
	)
GO

CREATE TABLE "swpdb"."GABINET" (
		"NR" CHAR(10) NULL,
		"BUDYNEK" CHAR(10) NULL,
		"RODZAJ" CHAR(30) NULL,
		"GABINET_ID" INT NOT NULL IDENTITY (1,1),
		"LEKARZ_ODPOWIEDZIALNY" INT NULL
	)
GO

CREATE TABLE "swpdb"."KARTA_PACJENTA" (
		"NUMER_KARTY" CHAR(20) NULL,
		"DATA_ZALOZENIA" DATE NULL,
		"KARTA_PACJENTA_ID" INT NOT NULL IDENTITY (1,1),
		"WLASCICIEL" INT NOT NULL,
		"PROWADZACY" INT NULL
	)
GO

CREATE TABLE "swpdb"."KONSULTACJA_ONLINE" (
		"DATA" DATETIME NULL,
		"OPIS" CHAR(200) NULL,
		"KONSULTACJA_ONLINE_ID" INT NOT NULL IDENTITY (1,1),
		"PACJENT_ID" INT NULL,
		"KONSULTANT_ID" INT NULL
	)
GO

CREATE TABLE "swpdb"."KONSULTANT" (
		"GODZINY_KONSULTACJI" CHAR(10) NULL,
		"IMIE" CHAR(20) NULL,
		"NAZWISKO" CHAR(20) NULL,
		"SPECJALIZACJA" CHAR(10) NULL,
		"NR_LICENCJI" CHAR(20) NULL,
		"DATA_URODZENIA" DATE NULL,
		"KONSULTANT_ID" INT NOT NULL IDENTITY (1,1)
	)
GO

CREATE TABLE "swpdb"."LEKARZ" (
		"LEKARZ_ID" INT NOT NULL IDENTITY (1,1),
		"IMIE" CHAR(20) NULL,
		"NAZWISKO" CHAR(20) NULL,
		"SPECJALIZACJA" CHAR(20) NULL,
		"PESEL" CHAR(11) NOT NULL,
		"DATA_URODZENIA" DATE NULL,
		"NR_LICENCJI" CHAR(20) NULL,
		"HASLO" CHAR(20) NOT NUll
	)
GO

CREATE TABLE "swpdb"."OPINIA" (
		"OPINIA_ID" INT NOT NULL IDENTITY (1,1),
		"NUMER_OPINII" INT NULL,
		"TRESC" CHAR(200) NULL,
		"OCENA" INT NULL,
		"LEKARZ_ID" INT NULL,
		"PACJENT_ID" INT NULL
	)
GO

CREATE TABLE "swpdb"."PACJENT" (
		"PACJENT_ID" INT NOT NULL IDENTITY (1,1),
		"IMIE" CHAR(20) NULL,
		"NAZWISKO" CHAR(20) NULL,
		"PESEL" CHAR(11) NULL,
		"DATA_URODZENIA" DATE NULL,
		"MIEJSCE_URODZENIA" CHAR(20) NULL,
		"ULICA_ZAMIESZKANIA" CHAR(20) NULL,
		"MIEJSCOWOSC" CHAR(20) NULL,
		"KOD_POCZTOWY" CHAR(10) NULL,
		"ADRES_E-MAIL" CHAR(30) NULL,
		"NR_TELEFONU" CHAR(15) NULL,
		"HASLO" CHAR(20) NOT NULL
	)
GO

CREATE TABLE "swpdb"."POWIADOMIENIE" (
		"POWIADOMIENIE_ID" INT NOT NULL IDENTITY (1,1),
		"NUMER_POWIADOMIENIA" INT NULL,
		"TRESC" CHAR(500) NULL,
		"PACJENT_ID" INT NULL,
		"LEKARZ_ID" INT NULL,
		"STATUS" CHAR(20) NULL
	)
GO

CREATE TABLE "swpdb"."TERMINARZ" (
		"TERMINARZ_ID" INT NOT NULL IDENTITY (1,1),
		"DATA" DATE NULL,
		"GODZINA" TIME NULL,
		"LEKARZ_ID" INT NULL
	)
GO

CREATE TABLE "swpdb"."WIZYTA_DOMOWA" (
		"WIZYTA_DOMOWA_ID" INT NOT NULL IDENTITY (1,1),
		"PACJENT_ID" INT NULL,
		"LEKARZ_ID" INT NULL,
		"ULICA" CHAR(30) NULL,
		"KOD_POCZTOWY" CHAR(10) NULL,
		"NR_DOMU" CHAR(5) NULL,
		"MIEJSCOWOSC" CHAR(20) NULL
	)
GO

CREATE TABLE "swpdb"."WIZYTA_DOMOWA_X_TERMINARZ" (
		"WIZYTA_DOMOWA_ID" INT NOT NULL,
		"TERMINARZ_ID" INT NOT NULL
	)
GO

CREATE TABLE "swpdb"."WIZYTA_KONSULTACYJNA" (
		"WIZYTA_KONSULTACYJNA_ID" INT NOT NULL IDENTITY (1,1),
		"PACJENT_ID" INT NULL,
		"GABINET_ID" INT NULL,
		"LEKARZ_ID" INT NULL,
		"CEL" CHAR(200) NULL,
		"DODATKOWE_UWAGI" CHAR(200) NULL
	)
GO

CREATE TABLE "swpdb"."WIZYTA_KONSULTACYJNA_X_TERMINARZ" (
		"WIZYTA_KONSULTACYJNA_ID" INT NOT NULL,
		"TERMINARZ_ID" INT NOT NULL
	)
GO

ALTER TABLE "swpdb"."BADANIE" ADD CONSTRAINT "BADANIE_PK" PRIMARY KEY
	("BADANIE_ID")
GO

ALTER TABLE "swpdb"."GABINET" ADD CONSTRAINT "GABINET_PK" PRIMARY KEY
	("GABINET_ID")
GO

ALTER TABLE "swpdb"."KARTA_PACJENTA" ADD CONSTRAINT "KARTA_PACJENTA_PK" PRIMARY KEY
	("KARTA_PACJENTA_ID")
GO

ALTER TABLE "swpdb"."KONSULTACJA_ONLINE" ADD CONSTRAINT "KONSULTACJA_ONLINE_PK" PRIMARY KEY
	("KONSULTACJA_ONLINE_ID")
GO

ALTER TABLE "swpdb"."KONSULTANT" ADD CONSTRAINT "KONSULTANT_PK" PRIMARY KEY
	("KONSULTANT_ID")
GO

ALTER TABLE "swpdb"."LEKARZ" ADD CONSTRAINT "LEKARZ_PK" PRIMARY KEY
	("LEKARZ_ID")
GO

ALTER TABLE "swpdb"."OPINIA" ADD CONSTRAINT "OPINIA_PK" PRIMARY KEY
	("OPINIA_ID")
GO

ALTER TABLE "swpdb"."PACJENT" ADD CONSTRAINT "PACJENT_PK" PRIMARY KEY
	("PACJENT_ID")
GO

ALTER TABLE "swpdb"."POWIADOMIENIE" ADD CONSTRAINT "POWIADOMIENIE_PK" PRIMARY KEY
	("POWIADOMIENIE_ID")
GO

ALTER TABLE "swpdb"."TERMINARZ" ADD CONSTRAINT "TERMINARZ_PK" PRIMARY KEY
	("TERMINARZ_ID")
GO

ALTER TABLE "swpdb"."WIZYTA_DOMOWA" ADD CONSTRAINT "WIZYTA_DOMOWA_PK" PRIMARY KEY
	("WIZYTA_DOMOWA_ID")
GO

ALTER TABLE "swpdb"."WIZYTA_DOMOWA_X_TERMINARZ" ADD CONSTRAINT "WIZYTA_DOMOWA_X_TERMINARZ_PK" PRIMARY KEY
	("WIZYTA_DOMOWA_ID",
	 "TERMINARZ_ID")
GO

ALTER TABLE "swpdb"."WIZYTA_KONSULTACYJNA" ADD CONSTRAINT "WIZYTA_KONSULTACYJNA_PK" PRIMARY KEY
	("WIZYTA_KONSULTACYJNA_ID")
GO

ALTER TABLE "swpdb"."WIZYTA_KONSULTACYJNA_X_TERMINARZ" ADD CONSTRAINT "WIZYTA_KONSULTACYJNA_X_TERMINARZ_PK" PRIMARY KEY
	("WIZYTA_KONSULTACYJNA_ID",
	 "TERMINARZ_ID")
GO

ALTER TABLE "swpdb"."BADANIE" ADD CONSTRAINT "BADANIE_KARTA_PACJENTA_FK" FOREIGN KEY
	("KARTA_PACJENTA_ID")
	REFERENCES "swpdb"."KARTA_PACJENTA"
	("KARTA_PACJENTA_ID")
GO

ALTER TABLE "swpdb"."BADANIE" ADD CONSTRAINT "BADANIE_LEKARZ_FK" FOREIGN KEY
	("LEKARZ_ZLECAJACY")
	REFERENCES "swpdb"."LEKARZ"
	("LEKARZ_ID")
GO

ALTER TABLE "swpdb"."GABINET" ADD CONSTRAINT "GABINET_LEKARZ_FK" FOREIGN KEY
	("LEKARZ_ODPOWIEDZIALNY")
	REFERENCES "swpdb"."LEKARZ"
	("LEKARZ_ID")
GO

ALTER TABLE "swpdb"."KARTA_PACJENTA" ADD CONSTRAINT "KARTA_PACJENTA_LEKARZ_FK" FOREIGN KEY
	("PROWADZACY")
	REFERENCES "swpdb"."LEKARZ"
	("LEKARZ_ID")
GO

ALTER TABLE "swpdb"."KARTA_PACJENTA" ADD CONSTRAINT "KARTA_PACJENTA_PACJENT_FK" FOREIGN KEY
	("WLASCICIEL")
	REFERENCES "swpdb"."PACJENT"
	("PACJENT_ID")
GO

ALTER TABLE "swpdb"."KONSULTACJA_ONLINE" ADD CONSTRAINT "KONSULTACJA_ONLINE_KONSULTANT_FK" FOREIGN KEY
	("KONSULTANT_ID")
	REFERENCES "swpdb"."KONSULTANT"
	("KONSULTANT_ID")
GO

ALTER TABLE "swpdb"."KONSULTACJA_ONLINE" ADD CONSTRAINT "KONSULTACJA_ONLINE_PACJENT_FK" FOREIGN KEY
	("PACJENT_ID")
	REFERENCES "swpdb"."PACJENT"
	("PACJENT_ID")
GO

ALTER TABLE "swpdb"."OPINIA" ADD CONSTRAINT "OPINIA_LEKARZ_FK" FOREIGN KEY
	("LEKARZ_ID")
	REFERENCES "swpdb"."LEKARZ"
	("LEKARZ_ID")
GO

ALTER TABLE "swpdb"."OPINIA" ADD CONSTRAINT "OPINIA_PACJENT_FK" FOREIGN KEY
	("PACJENT_ID")
	REFERENCES "swpdb"."PACJENT"
	("PACJENT_ID")
GO

ALTER TABLE "swpdb"."POWIADOMIENIE" ADD CONSTRAINT "POWIADOMIENIE_LEKARZ_FK" FOREIGN KEY
	("LEKARZ_ID")
	REFERENCES "swpdb"."LEKARZ"
	("LEKARZ_ID")
GO

ALTER TABLE "swpdb"."POWIADOMIENIE" ADD CONSTRAINT "POWIADOMIENIE_PACJENT_FK" FOREIGN KEY
	("PACJENT_ID")
	REFERENCES "swpdb"."PACJENT"
	("PACJENT_ID")
GO

ALTER TABLE "swpdb"."TERMINARZ" ADD CONSTRAINT "TERMINARZ_LEKARZ_FK" FOREIGN KEY
	("LEKARZ_ID")
	REFERENCES "swpdb"."LEKARZ"
	("LEKARZ_ID")
GO

ALTER TABLE "swpdb"."WIZYTA_DOMOWA" ADD CONSTRAINT "WIZYTA_DOMOWA_LEKARZ_FK" FOREIGN KEY
	("LEKARZ_ID")
	REFERENCES "swpdb"."LEKARZ"
	("LEKARZ_ID")
GO

ALTER TABLE "swpdb"."WIZYTA_DOMOWA" ADD CONSTRAINT "WIZYTA_DOMOWA_PACJENT_FK" FOREIGN KEY
	("PACJENT_ID")
	REFERENCES "swpdb"."PACJENT"
	("PACJENT_ID")
GO

ALTER TABLE "swpdb"."WIZYTA_DOMOWA_X_TERMINARZ" ADD CONSTRAINT "WIZYTA DOMOWA_TERMINARZ_FK" FOREIGN KEY
	("WIZYTA_DOMOWA_ID")
	REFERENCES "swpdb"."WIZYTA_DOMOWA"
	("WIZYTA_DOMOWA_ID")
GO

ALTER TABLE "swpdb"."WIZYTA_DOMOWA_X_TERMINARZ" ADD CONSTRAINT "WIZYTA DOMOWA_TERMINARZ_FK1" FOREIGN KEY
	("TERMINARZ_ID")
	REFERENCES "swpdb"."TERMINARZ"
	("TERMINARZ_ID")
GO

ALTER TABLE "swpdb"."WIZYTA_KONSULTACYJNA" ADD CONSTRAINT "WIZYTA_KONSULTACYJNA_GABINET_FK" FOREIGN KEY
	("GABINET_ID")
	REFERENCES "swpdb"."GABINET"
	("GABINET_ID")
GO

ALTER TABLE "swpdb"."WIZYTA_KONSULTACYJNA" ADD CONSTRAINT "WIZYTA_KONSULTACYJNA_LEKARZ_FK" FOREIGN KEY
	("LEKARZ_ID")
	REFERENCES "swpdb"."LEKARZ"
	("LEKARZ_ID")
GO

ALTER TABLE "swpdb"."WIZYTA_KONSULTACYJNA" ADD CONSTRAINT "WIZYTA_KONSULTACYJNA_PACJENT_FK" FOREIGN KEY
	("PACJENT_ID")
	REFERENCES "swpdb"."PACJENT"
	("PACJENT_ID")
GO

ALTER TABLE "swpdb"."WIZYTA_KONSULTACYJNA_X_TERMINARZ" ADD CONSTRAINT "WIZYTA KONSULTACYJNA_TERMINARZ_FK" FOREIGN KEY
	("WIZYTA_KONSULTACYJNA_ID")
	REFERENCES "swpdb"."WIZYTA_KONSULTACYJNA"
	("WIZYTA_KONSULTACYJNA_ID")
GO

ALTER TABLE "swpdb"."WIZYTA_KONSULTACYJNA_X_TERMINARZ" ADD CONSTRAINT "WIZYTA KONSULTACYJNA_TERMINARZ_FK1" FOREIGN KEY
	("TERMINARZ_ID")
	REFERENCES "swpdb"."TERMINARZ"
	("TERMINARZ_ID")
GO

